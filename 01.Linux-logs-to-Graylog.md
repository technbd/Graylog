## Send Linux logs to Graylog:


### Prerequisites:
- Graylog server running (with web UI accessible).
- A configured Graylog Input, usually one of:
    - Syslog UDP input (port `1514` by default)


#### Environment: 
- Graylog server IP: `10.1.1.135`
- Graylog Syslog UDP port: `1514`



### Install Rsyslog: 

```
apt install -y rsyslog
```


#### Configure Syslog:

By default, rsyslog doesn’t listen for remote messages. We need to enable its listener modules.

```
vim /etc/rsyslog.conf

# Uncomment these lines: 
module(load="imudp")
input(type="imudp" port="514")
```


_Validate configuration syntax:_
```
rsyslogd -N1
```


```
systemctl start rsyslog
systemctl enable rsyslog

systemctl status rsyslog
```



```
netstat -tulpn | grep 514

udp     7680      0 0.0.0.0:514       0.0.0.0:*      123736/rsyslogd
```


```
nc -vzu 10.1.1.135 514


Connection to 10.1.1.135 514 port [udp/syslog] succeeded!
```





### Access Graylog Dashboard:

Visit in browser: `http://<your-server-ip>:9000`


### Create a Syslog UDP Input, Indices and Streams:

1. Navigate to `System` → `Inputs` → select `Syslog UDP` → `Launch new input`:
    - Title: `node1_syslog`
    - Bind address: `0.0.0.0`
    - Port: `1514`
    - [✔] Store full message?
    - click `Launch input`

2. Navigate to `System` → `Indices` - click `Create index set`: 
    - Select a template: `Built-in Templates`
    - 30 Days Hot: click `Select`

    - click `Apply template`
        - Title: node1_syslog_index
        - Description: node1_syslog_index
        - Index prefix: node1_syslog_index
        - click `Create index set`

3. Navigate to `Streams` - click `Create stream`: 
    - Title: `node1_syslog_stream`
    - Index Set: `node1_syslog_index`
    - click `Create stream`

4. Select `node1_syslog_stream` - click `More` - click `Manage Rules`: 
    - Click `Add stream rule` 
        - Type: `match input`
        - Input: `node1_syslog (Syslog UDP)`
        - click `Create Rule`
    - Click `I'm done`

5. Navigate to `Streams` - click `node1_syslog_stream`





### Configure Syslog to Send Logs to Graylog:

This configuration sends all syslog messages to Graylog running on UDP port `1514`.

_Edit `/etc/rsyslog.conf` or create a new file under `/etc/rsyslog.d/10.graylog.conf`:_
```
vim /etc/rsyslog.d/10.graylog.conf


*.* @10.1.1.135:1514;RSYSLOG_SyslogProtocol23Format
```



```
systemctl restart rsyslog
```




Send all system logs from Ubuntu (node1) to Graylog Server (10.1.1.135:1514) via UDP.


